# HTTPS

HTTPSλ” HTTPμ λ³΄μ• μΈ΅λ©΄μ„ κ°•ν™”ν• μ›Ή ν†µμ‹  ν”„λ΅ν† μ½μ…λ‹λ‹¤. HTTPμ™€ λ‹¬λ¦¬ μ†μΌ“ ν†µμ‹ μ—μ„ ν‰λ¬Έμ„ μ΄μ©ν•λ” λ€μ‹ , μ›Ή μƒμ—μ„ μ •λ³΄λ¥Ό μ•”νΈν™”ν•λ” SSLμ΄λ‚ TLS ν”„λ΅ν† μ½μ„ ν†µν•΄ μ•”νΈλ¬Έμ„ μ£Όκ³  λ°›μµλ‹λ‹¤. λ”°λΌμ„ λ°μ΄ν„°μ μ μ ν• λ³΄νΈλ¥Ό λ³΄μ¥ν•©λ‹λ‹¤. κΈ°λ³Έμ μΌλ΅ 443λ² ν¬νΈλ¥Ό μ‚¬μ©ν•©λ‹λ‹¤. 

HTTPμ— λΉ„ν•΄ λ³΄μ•μƒμ μ΄μ μ„ κ°€μ§€κ³  μμ§€λ§, μ•”νΈν™” κ³Όμ •μ΄ μ¶”κ°€ λΌ HTTPμ— λΉ„ν•΄μ„λ” λλ¦¬λ‹¤λ” λ‹¨μ μΌ κ°€μ§‘λ‹λ‹¤. λν• μΈμ¦μ„λ¥Ό λ°κΈ‰λ°›κ³  μ μ§€ν•λ” λΉ„μ©μ΄ λ“­λ‹λ‹¤.

> π’΅ μΈν„°λ„· μ—°κ²°μ΄ λκΈ΄ κ²½μ° μ¬μΈμ¦ μ‹κ°„μ΄ μ†μ”λλ‹¤λ”λ°, μ΄λ” μ¶”κ°€λ΅ ν•™μµν•΄μ•Ό ν•  κ²ƒ κ°™λ‹¤. 

## TLS(Transpot Layer Security), SSL(Secure Socket Layer)

TLS ν”„λ΅ν† μ½κ³Ό SSL ν”„λ΅ν† μ½μ€ λ¨λ‘ μ›Ή μƒμ—μ„ μ •λ³΄λ¥Ό μ•”νΈν™”ν•΄ μ‚¬μ©ν•λ” ν”„λ΅ν† μ½λ΅, TLSλ” SSLμ—μ„ λ°μ „ν• ν•νƒμ…λ‹λ‹¤. λ‘ ν”„λ΅ν† μ½μ μ£Όμ” λ©ν‘λ” λ°μ΄ν„°μ κΈ°λ°€μ„±, λ¬΄κ²°μ„±, μ „μ μ„λ…μ…λ‹λ‹¤. 

- κΈ°λ°€μ„±: λ°μ΄ν„°λ¥Ό κ΄€λ ¨λμ§€ μ•μ€ μ‚¬λμ—κ² λ…Έμ¶ν•μ§€ μ•λ”λ‹¤.
- λ¬΄κ²°μ„±: λ°μ΄ν„°μ λ³€μ΅°λ¥Ό λ§‰λ”λ‹¤.
- μ „μ μ„λ…: ID λ° λ””μ§€ν„Έ μΈμ¦μ„λ¥Ό μ΄μ©ν•΄ μ‚¬μ©μλ¥Ό μΈμ¦ν•λ‹¤. 

## HTTPS λ™μ‘ κ³Όμ •

κ³µκ°ν‚¤ μ•”νΈν™” λ°©μ‹κ³Ό λ€μΉ­ν‚¤ μ•”νΈν™” λ°©μ‹μ„ νΌν•©ν• ν•μ΄λΈλ¦¬λ“ λ°©μ‹μ„ μ‚¬μ©ν•©λ‹λ‹¤. κ³µκ°ν‚¤ λ°©μ‹μΌλ΅ λ€μΉ­ν‚¤λ¥Ό μ„λ΅ μ£Όκ³  λ°›κ³ , λ€μΉ­ν‚¤λ¥Ό μ΄μ©ν•΄ λ°μ΄ν„°λ¥Ό μ•”νΈν™” ν•΄ μ£Όκ³  λ°›μµλ‹λ‹¤.

<img width="1319" alt="image" src="https://user-images.githubusercontent.com/45311765/201861052-6e2f1aab-7476-4de2-aa8b-b457c57b44fb.png">

1. Client Hello: ν΄λΌμ΄μ–ΈνΈκ°€ μ§€μ›ν•λ” TLS(SSL) λ²„μ „ μ§€μ›λλ” μ•”νΈν™” λ°©μ‹ λ©λ΅, λλ¤ λ°”μ΄νΈ λ¬Έμμ—΄(clinet random)μ„ μ „μ†΅ν•λ‹¤. 
2. Server Hello: μ„λ²„μ SSL μΈμ¦μ„, μ„λ²„μ—μ„ μ„ νƒν• μ•”νΈν™” λ°©μ‹, λλ¤ λ°”μ΄νΈ λ¬Έμμ—΄(server random)
3. Verify Server Certificate: CAλ΅ λ¶™μ–΄ λ°›μ€ λ©λ΅μ„ ν™•μΈν•΄ μ„λ²„κ°€ μΈμ¦μ„μ— λ…μ‹λ μ„λ²„μΈμ§€, μ‹¤μ  ν•΄λ‹Ή λ„λ©”μΈμ μ†μ μμΈμ§€ λ“±μ„ ν™•μΈν•λ‹¤. 
4. Client Key Exchange: CA μΈμ¦μ„λ΅ SSL μΈμ¦μ„λ¥Ό λ³µνΈν™”ν•κ³  μ–»μ€ μ„λ²„ κ³µκ°ν‚¤λ΅ λλ¤ λ°”μ΄νΈ λ¬Έμμ—΄(the premaster secret)μ„ μ•”νΈν™”ν•μ—¬ μ „μ†΅ν•λ‹¤. 
    - Send client certificate: λ§μ•½ μ„λ²„κ°€ ν΄λΌμ΄μ–ΈνΈμ μΈμ¦μ„λ¥Ό μ”κµ¬ν•λ‹¤λ©΄ μ„λ²„μ μΈμ¦μ„μ™€ κ°™μ€ λ°©μ‹μΌλ΅ μ•”νΈν™”λ¥Ό μ§„ν–‰ν•μ—¬ ν•¨κ» μ „μ†΅ν•λ‹¤.
5. Verify Client Certificate: μ„λ²„κ°€ λ°›μ€ the premaster secretμ„ μ„λ²„ κ°μΈν‚¤λ΅ λ³µνΈν™”ν•λ‹¤. 
6. Client Finished: ν΄λΌμ΄μ–ΈνΈκ°€ `client random`, `server random`, `the premaster secret`μ„ μ΄μ©ν•΄ λ€μΉ­ν‚¤λ΅ ν™μ©ν•  `session key`λ¥Ό μƒμ„±ν•λ‹¤.
7. Server Finished: μ„λ²„κ°€ `client random`, `server random`, `the premaster secret`λ¥Ό μ΄μ©ν•΄ λ€μΉ­ν‚¤λ΅ ν™μ©ν•  `session key`λ¥Ό μƒμ„±ν•©λ‹λ‹¤. μ„λ²„κ°€ μ„Έμ… ν‚¤λ΅ μ•”νΈν™”λ "finished" λ©”μ‹μ§€λ¥Ό μ „μ†΅ν•λ‹¤.
8. Exchange Messages: ν•Έλ“μ…°μ΄ν¬κ°€ μ™„λ£λκ³ , μ„Έμ… ν‚¤λ¥Ό μ΄μ©ν•΄ λ©”μ„Έμ§€λ¥Ό μ£Όκ³  λ°›λ”λ‹¤.

## μ°Έκ³  μλ£
- https://www.cloudflare.com/ko-kr/learning/ssl/what-happens-in-a-tls-handshake/
